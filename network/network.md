


# 东西流量与南北流量



1 东西流量   pod 和pod  之间的流量

   同一个集群中Pod之间的流量 





2 南北流量   pod  和 外部网络之间的流量



# L2  和 L3



```
二层网络仅仅通过MAC寻址即可实现通讯
一个二层广播域。（一个IP子网=一个广播域）
```



```
三层网络则需要通过IP路由实现跨网段的通。
```





# overlay   和  underlay



1   overlay 网络   是一个虚拟网络   本质就是隧道技术    需要对报文进行封包和解包的操作

```
overlay是基于隧道技术实现的，overlay的流量需要跑在underlay之上。
```





2   underlay 网络   区别于 overlay 的 传统的数据中心组网技术

```
Underlay就是当前数据中心网路基础转发架构的网络，只要数据中心网络上任意两点路由可达即可，指的是物理基础层。我们可以通过物理网络设备本身的技术改良、扩大设备数量、带宽规模等完善Underlay网络，其包含了一切现有的传统网络技术。
```





3 总结



```
underlay就是底层承载网，
overlay就是基于底层网络互联互通的基础加上隧道技术去构建一个虚拟的网络

underlay是底层网络，负责互联互通
```









```
underlay和overlay和网络是L2还是L3没有关系。可能存在这样的情况：underlay是IP层，而overlay是数据链路层的情况。比如云数据中心里，虚拟机如果要做大二层的网络。
```



# L2 overlay



组网后 都在一个二层网络里



可以实现 大二层    可以跨数据中心



大二层技术可以有效解决   传统大规模的二层网络广播等问题



> https://www.zhihu.com/question/24393680?sort=created







# L3 overlay



overlay 技术实现的一个三层网络  ，其中的网络节点可以跨网段通信



# L2 underlay

二层互通的网络

同一个网段



# L3  underlay

可以跨网段通信







# 参考链接



> https://www.cnblogs.com/zyfd/p/9999357.html



> https://blog.csdn.net/weixin_46073333/article/details/106402016





# k8s  对网络的要求



1 每个Pod有一个独立的IP地址       至少有一个独立的IP地址 有单pod 多IP 的情况

2 每个Pod可以和集群中任一个Pod直接进行通信（不经过NAT）



k8s 网络特点

1 忽略底层实现细节，一个Kubernetes集群中的所有Pod之间都可以通过一个”扁平“的三层网络相互访问，这里“扁平”的含义指的是从一个Pod的角度来看，它可以只通过三层路由访问集群中任何一个其他的Pod，中间不需要经过NAT，即在发送端和目的端看到的数据包的源地址和目的地址是一样的。



2 该“扁平”的三层网络是从Pod角度来说的，在实际部署时，这个L3网络的实现可以是underlay的，直接通过底层网络的物理设备进行路由；也可以采用overlay的隧道技术实现。



